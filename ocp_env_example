# Environment variables to be used by other scripts
dnsserver="__DNSSERVER__"
basedomain="__BASEDOMAIN__"
clustername="__CLUSTERNAME__"
workercount="__WORKERCOUNT__"
vcenter="__VCENTER__"
vcenteruser="__VCENTERUSER__"
vcenterpassword="__VCENTERPASSWORD__"
vcenterdatacenter="__VCENTERDATACENTER__"
vcenterhost="__VCENTERHOST__"
vcenterdatastore="__VCENTERDATASTORE__"
#vcenterfolder must be in the format of /$vcenterdatacenter/vm/<FOLDER>
vcenterfolder="/$vcenterdatacenter/vm/__VCENTERFOLDER__"
#
helper="__helper_IP_ADDRESS__"
bastion_host="__bastion_hostname__"

ocpmajorversion="4.9"
ocpversion="4.9.7"

#proxy
httpproxy="__http_proxy__"
httpsproxy="__https_proxy__"
noproxy="__no_proxy__"

# Default ones - updated as needed
podcidr="10.128.0.0/14"
machinecidr="10.0.0.0/16"
servicecidr="172.30.0.0/16"
hostprefix="23"
# Default it must be less 50 bytes than the MTU such as 1500 -> 1450 (default), 9000 -> 8950
sdn_mtu="1450"

gateway=""
netmask=""

ntpserver="__NTP_SERVER__"

pullsecret_file="__PULLSECERT_FILE__"
pullsecret=$(cat $pullsecret_file)

export ssh_key_name="__sshkey_name__"
export ssh_public_key_file="$HOME/.ssh/${ssh_key_name}.pub"
if [ ! -f $ssh_public_key_file ]
then
  [ -f install/001-setup-sshkey.sh ] && install/001-setup-sshkey.sh
  export ssh_public_key=$(cat $ssh_public_key_file)
else
  export ssh_public_key=$(cat $ssh_public_key_file)
fi

# A number of nodes
master_count=3
woker_count=2
infra_int_count=2
logmon_count=3
infra_mgt_count=0
odf_count=3
# If the Infra int is starting from infra04.<domain> infra05.<domain> then set start_infra_int=4
start_infra_int=""
total_infra_count=$(($infra_int_count + $infra_mon_count + $infra_mgt_count ))

export dnsserver basedomain clustername workercount 
export vcenter vcenteruser vcenterpassword vcenterdatacenter vcenterhost vcenterdatastore vcenterfolder helper bastion_host
export ocpmajorversion ocpversion podcidr machinecidr servicecidr ntpserver hostprefix sdn_mtu
export httpproxy httpsproxy noproxy 
export pullsecret_file pullsecret 
export gateway netmask
export master_count worker_count infra_int_count logmon_count infra_mgt_count odf_count

export GOVC_URL="https://$vcenter"
export GOVC_USERNAME="${vcenteruser}"
export GOVC_PASSWORD="${vcenterpassword}"
export GOVC_INSECURE=true
export GOVC_DATACENTER="${vcenterdatacenter}"
export GOVC_FOLDER="${vcenterfolder}"
export GOVC_DATASTORE="$vcenterdatastore"

export OCP_DIR=$HOME/$clustername
[ ! -d $OCP_DIR ] && mkdir -p $OCP_DIR

export OCP_BACKUP=$HOME/backup/$clustername
[ ! -d ${OCP_BACKUP} ] && mkdir -p $OCP_BACKUP

# Create the post directory to store the post-install configurations
export OCP_POST=${OCP_DIR}/post
[ ! -d ${OCP_POST} ] && mkdir -p ${OCP_POST}

export OCP_DOMAIN="${clustername}.${basedomain}"
export HTTP_HOST=$helper
export INSTALL_CONFIG="${OCP_DIR}/install-config.yaml"

export RHCOS_TEMPLATE="RHCOS-Template"
export RHCOS_BOOTSTRAP="RHCOS-Template-$clustername-bootstrap"
export RHCOS_MASTER="RHCOS-Template-$clustername-master"
export RHCOS_WORKER="RHCOS-Template-$clustername-worker"
export RHCOS_ODF="RHCOS-Template-$clustername-odf"
export RHCOS_INFRA_INT="RHCOS-Template-$clustername-infra-int"
export RHCOS_INFRA_MON="RHCOS-Template-$clustername-infra-mon"
